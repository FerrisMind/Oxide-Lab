# Конфигурация cargo-deny для пермиссивных лицензий

## Обзор

Файл `src-tauri/deny.toml` настроен для работы с пермиссивными лицензиями, которые позволяют свободное использование, модификацию и распространение кода без ограничений на коммерческое использование или требования к открытию исходного кода.

## Разрешенные лицензии

### Основные пермиссивные лицензии

- **MIT** - Massachusetts Institute of Technology License
- **Apache-2.0** - Apache License 2.0
- **BSD-2-Clause** - BSD 2-Clause License
- **BSD-3-Clause** - BSD 3-Clause License
- **ISC** - Internet Systems Consortium License

### Дополнительные пермиссивные лицензии

- **CC0-1.0** - Creative Commons Zero (Public Domain)
- **Unlicense** - Unlicense (Public Domain)
- **Zlib** - zlib/libpng license

### Лицензии с исключениями (пермиссивные)

- **Apache-2.0 WITH LLVM-exception** - Apache 2.0 с исключением LLVM

### Специализированные пермиссивные лицензии

- **Unicode-3.0** - Unicode License v3 (используется в ICU крейтах)
- **MPL-2.0** - Mozilla Public License 2.0 (пермиссивная)
- **CDLA-Permissive-2.0** - Community Data License Agreement Permissive 2.0

## Использование

### Проверка лицензий

```bash
cargo deny check licenses
```

### Проверка всех аспектов безопасности

```bash
cargo deny check
```

### Обновление базы данных лицензий

```bash
cargo deny update
```

## Исключения

В конфигурации есть исключение для крейта `ring`:

```toml
[[licenses.clarify]]
name = "ring"
expression = "MIT AND ISC AND OpenSSL"
license-files = [
    { path = "LICENSE", hash = 0xbd0eed23 }
]
```

Это исключение необходимо, поскольку `ring` использует комбинацию лицензий, включая OpenSSL, которая не входит в список разрешенных пермиссивных лицензий.

## Добавление новых лицензий

Если в проекте появляются новые зависимости с пермиссивными лицензиями, которые не входят в текущий список, их можно добавить в секцию `allow`:

```toml
allow = [
    # ... существующие лицензии ...
    "NEW-PERMISSIVE-LICENSE",
]
```

## Запрещенные лицензии

Все лицензии, не указанные в списке `allow`, автоматически запрещены. Это включает:

- **Copyleft лицензии** (GPL, AGPL, LGPL)
- **Лицензии с требованиями к открытию исходного кода**
- **Лицензии с ограничениями на коммерческое использование**

## Мониторинг

Регулярно запускайте проверку лицензий для:

- Обнаружения новых зависимостей с неподходящими лицензиями
- Контроля соответствия политике лицензирования
- Предотвращения проблем с лицензионной совместимостью

## Интеграция в CI/CD

Рекомендуется добавить проверку лицензий в пайплайн CI/CD:

```yaml
# .github/workflows/ci.yml
- name: Check licenses
  run: cargo deny check licenses
```

## Troubleshooting

### Предупреждения о крейтах без лицензии

Некоторые крейты могут не указывать лицензию в своем `Cargo.toml`. Это не критично, но стоит обратить внимание на такие зависимости.

### Новые зависимости с неподходящими лицензиями

Если появляется ошибка о запрещенной лицензии:

1. Проверьте, является ли лицензия пермиссивной
2. Если да, добавьте её в список `allow`
3. Если нет, рассмотрите альтернативные зависимости

### Исключения для конкретных крейтов

Для крейтов с комбинированными лицензиями используйте секцию `exceptions`:

```toml
exceptions = [
    { crate = "problematic-crate", allow = ["SPECIFIC-LICENSE"] },
]
```
