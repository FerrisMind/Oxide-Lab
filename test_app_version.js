// ะขะตััะพะฒัะน ัะบัะธะฟั ะดะปั ะฟัะพะฒะตัะบะธ ะบะพะผะฐะฝะดั ะฟะพะปััะตะฝะธั ะฒะตััะธะธ ะฟัะธะปะพะถะตะฝะธั
// ะะฐะฟััะบะฐะตััั ะฒ ะฑัะฐัะทะตัะต ัะตัะตะท ะบะพะฝัะพะปั ัะฐะทัะฐะฑะพััะธะบะฐ

async function testAppVersion() {
  try {
    // ะัะพะฒะตััะตะผ, ััะพ Tauri API ะดะพัััะฟะตะฝ
    if (typeof window.__TAURI__ === 'undefined') {
      console.log('โ๏ธ Tauri API ะฝะตะดะพัััะฟะตะฝ. ะญัะพ ะผะพะถะตั ะฑััั ะฒะตะฑ-ะฒะตััะธั ะฟัะธะปะพะถะตะฝะธั.');
      return;
    }

    // ะะผะฟะพััะธััะตะผ ะธ ะฒัะทัะฒะฐะตะผ ะบะพะผะฐะฝะดั
    const { invoke } = await import('@tauri-apps/api/core');
    const appInfo = await invoke('get_app_info');

    console.log('โ ะะพะผะฐะฝะดะฐ get_app_info ัะฐะฑะพัะฐะตั ะบะพััะตะบัะฝะพ');
    console.log('ะะฝัะพัะผะฐัะธั ะพ ะฟัะธะปะพะถะตะฝะธะธ:', appInfo);

    // ะัะพะฒะตััะตะผ, ััะพ ะฒะตััะธั ะธะทะฒะปะตัะตะฝะฐ ะบะพััะตะบัะฝะพ
    if (appInfo.version && appInfo.version !== '0.0.0') {
      console.log('โ ะะตััะธั ะธะทะฒะปะตัะตะฝะฐ ะบะพััะตะบัะฝะพ:', appInfo.version);
    } else {
      console.log('โ ะะตััะธั ะฝะต ะฝะฐะนะดะตะฝะฐ ะธะปะธ ะฝะตะบะพััะตะบัะฝะฐั:', appInfo.version);
    }

    return appInfo;
  } catch (error) {
    console.error('โ ะัะธะฑะบะฐ ะฟัะธ ะฒัะทะพะฒะต ะบะพะผะฐะฝะดั get_app_info:', error);
    return null;
  }
}

// ะะฒัะพะผะฐัะธัะตัะบะธะน ัะตัั ะฟัะธ ะทะฐะณััะทะบะต ัััะฐะฝะธัั
if (typeof window !== 'undefined') {
  window.testAppVersion = testAppVersion;

  // ะะฐะฟััะบะฐะตะผ ัะตัั ัะตัะตะท ะฝะตะฑะพะปัััั ะทะฐะดะตัะถะบั
  setTimeout(() => {
    console.log('๐ ะะฐะฟััะบ ัะตััะฐ ะบะพะผะฐะฝะดั get_app_info...');
    testAppVersion().then((result) => {
      if (result) {
        console.log('๐ ะขะตัั ะทะฐะฒะตััะตะฝ ััะฟะตัะฝะพ!');
      } else {
        console.log('๐ฅ ะขะตัั ะทะฐะฒะตััะตะฝ ั ะพัะธะฑะบะฐะผะธ');
      }
    });
  }, 1000);
}
